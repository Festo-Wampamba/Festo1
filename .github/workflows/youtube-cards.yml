name: YouTube Video Cards Automation

on:
  schedule:
    # Runs every day at 00:00 UTC
    - cron: '0 0 * * *'
  workflow_dispatch: # Allows manual override/testing

# Prevent multiple instances of this workflow from running at the same time
concurrency:
  group: youtube-cards-${{ github.ref }}
  cancel-in-progress: true

jobs:
  update-readme:
    name: Update YouTube Cards
    runs-on: ubuntu-latest
    permissions:
      contents: write # High-level requirement to push changes to README.md
    
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Fetch and Inject YouTube Cards
        uses: DenverCoder1/github-readme-youtube-cards@main
        with:
          channel_id: UCSiPOa3Vowwi42t1BysexmQ
          api_key: ${{ secrets.YOUTUBE_API_KEY }}
          max_videos: 6
          show_duration: true
          # UI Styling to match 'Radical' theme
          background_color: "#0d1117"
          title_color: "#ffffff"
          stats_color: "#dedede"
          max_title_lines: 1
          width: 250
          border_radius: 5
          # Git Configuration
          committer_email: "github-actions[bot]@users.noreply.github.com"
          committer_username: "github-actions[bot]"
          commit_message: "docs: update latest youtube videos [skip ci]"
